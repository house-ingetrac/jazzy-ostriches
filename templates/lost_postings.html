{% extends "base.html" %}

{% block head %}
<script src="https://maps.googleapis.com/maps/api/js?key={{api_key}}"></script>
<script>
var infowindow = new google.maps.InfoWindow();
var listings = [[[40.76, -73.99], "wallet", 3]]

//finds number of Markers
//var all_locations = [];
//for each (listing in listings){
//  all_locations.push(list[0])
//};
//var markers = all_locations.filter(onlyUnique); //filter to find all unique all_locations

//helper function: adds postings to each marker on click
// function add_postings(marker, i, items_list) {
//   var contentString = "";
//   //adds first 5 posts
//   for(i = 0; i < 5; i++){
//     try{
//       contentString += "<form action='/posting'><input type='hidden' name='item_id' value='"+items_list[2]+"'><input type='submit' value='"+items_list[1] + "'></form>";
//     };
//     catch(e){
//       break;
//     };
//   };
//   //adds See More button
//   contentString += "<br>" + "<form action='/listings'><input type='submit' value='See More'><input type='hidden' name='location' value='"+items_list[0]+"'></form>";
//   infowindow.setContent(contentString);
//   infowindow.open(map, marker);
// };

function initialize() {
  var map = new google.maps.Map(document.getElementById('sidemap'), {
    zoom: 13,
    center: new google.maps.LatLng(40.76, -73.99), //center for times square
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
  var marker = new google.maps.Marker({
       position: new google.maps.LatLng(40.76, -73.99),
       label: "15",
       map: map
  });
};

//add markers to map
// for(loc = 0; loc < markers.length; loc++){
//   //creates new array of items at location
//   var items = [];
//   for each (listing in listings){
//     if (markers[loc] == listing[0]){
//       items.push(listing)
//     };
//   };
//
//   var marker = new google.maps.Marker({
//     position: new google.maps.LatLng(markers[loc][0], markers[loc][1]),
//     label: items.length.toString(),
//     map: map
//   });
//   google.maps.event.addListener(marker, 'click', add_postings(marker, i, items));
// };
google.maps.event.addDomListener(window, 'load', initialize);
</script>
{% endblock %}

{% block content %}
<div class="filter">
  <form action="/lost_postings" method="POST">
    <div id="search-wrapper">
      <input type="text" placeholder="  Search" name="search" id="search-input">
      <button type="button" id="search-btn" name="submit-search" value="searched">
        <span class="glyphicon glyphicon-search"></span>
      </button>
    </div>
    <div id="white-block"></div>
    <select class="filterdrop" name="borough">
      <option value="none">Borough</option>
      <option value="manhattan">Mahattan</option>
      <option value="brooklyn">Brooklyn</option>
      <option value="queens">Queens</option>
      <option value="staten">Staten Island</option>
    </select>
    <select class="filterdrop" name="category">
      <option value="none">Category</option>
      <option value="bags">Bags</option>
      <option value="wallets">Wallets</option>
      <option value="documents">Documents</option>
      <option value="accessories">Accessories</option>
      <option value="electronics">Electronics</option>
      <option value="other">Other</option>
    </select>
    <select class="filterdrop" name="date">
      <option value="none">Sort</option>
      <option value="newest">Newest</option>
      <option value="oldest">Oldest</option>
    </select>
    <input id="filterbtn" type="submit" name="filter" value="Filter">
  </form>
</div>
<div id="overflow">
<div class="postings">
<h1>Lost Items</h1>
{% for item in lost_items %}
  <b>{{item[0]}}</b> <!--item-->
  Category: {{item[1]}}<br>
  Date: {{item[2]}}<br>
  Location:
    <!-- location could be optional-->
    {% if item[3] == "" %} N/A<br>
    {% else %} {{item[3]}}<br>
    {% endif %}
  Description:
    <!-- desciption is optional-->
    {% if item[4] == "" %} N/A<br>
    {% else %} {{item[4]}}<br>
    {% endif %}
  <hr>
{% endfor %}
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
<h2>Wallet</h2><br>
<p>Blue wallet last seen at around 5 pm on the N train platform. fishadlkfjhsdjfklsdjfkldsjflkdjflksjdfkl;sfsjdfklsjflksjfkl;sjfkljsdfl;sjlfkjslk;fjdl;kfjslkfjldkfjlk;jdlk;fjslkjfklsjfdl;jklsfj</p>
</div>
<div id="sidemap"></div>
</div>
{% endblock %}
